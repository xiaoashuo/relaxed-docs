(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{464:function(a,t,s){"use strict";s.r(t);var n=s(1),e=Object(n.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"download模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#download模块"}},[a._v("#")]),a._v(" Download模块")]),a._v(" "),t("h2",{attrs:{id:"简言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简言"}},[a._v("#")]),a._v(" 简言")]),a._v(" "),t("p",[a._v("由于每个项目基本都有导出功能，虽然实现不复杂，但过于繁琐，")]),a._v(" "),t("p",[a._v("因此将导出部分单独抽成注解形式。以方便使用。")]),a._v(" "),t("h2",{attrs:{id:"使用方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[a._v("#")]),a._v(" 使用方式")]),a._v(" "),t("h3",{attrs:{id:"_1、引入坐标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、引入坐标"}},[a._v("#")]),a._v(" 1、引入坐标")]),a._v(" "),t("div",{staticClass:"language-pom extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("      <dependency>\n            <groupId>cn.lovecyy</groupId>\n            <artifactId>relaxed-spring-boot-starter-download</artifactId>\n            <version>${version}</version>\n      </dependency>\n")])])]),t("h3",{attrs:{id:"_2、创建controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建controller"}},[a._v("#")]),a._v(" 2、创建controller")]),a._v(" "),t("blockquote",[t("p",[a._v("方法必须使用"),t("code",[a._v("@ResponseDownload")]),a._v("标注+返回值为"),t("code",[a._v("DownloadModel")])])]),a._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[a._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@ResponseDownload")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("channel "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DownTypeEnum")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[a._v("LOCAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[a._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"local"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DownloadModel")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("local")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DownloadModel")]),a._v(" downloadModel "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("DownloadModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"D:\\\\test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"123.jpg"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" downloadModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("参数解析:")]),a._v(" "),t("h4",{attrs:{id:"responsedownload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#responsedownload"}},[a._v("#")]),a._v(" @ResponseDownload")]),a._v(" "),t("ul",[t("li",[a._v("channel 渠道LOCAL,SFTP,OSS,OTHER(自定义)默认为LOCAL")])]),a._v(" "),t("p",[a._v("​    若要支持 SFTP(参考SFTP模块文档) ，OSS（参考SFTP模块文档） 需要引入对应依赖")]),a._v(" "),t("ul",[t("li",[a._v("customHandler 当channel为OTHER时必须指定，且被SPRING容器管理，及注册成BEAN")]),a._v(" "),t("li",[a._v("inline 是否直接展示 默认为false")]),a._v(" "),t("li",[a._v("contentType 如果未指定，会尝试获取 如果尝试获取失败，则默认application/octet-stream")]),a._v(" "),t("li",[a._v("charset  如果下载包含中文的文本文件出现乱码，可以尝试指定编码 默认UTF-8")]),a._v(" "),t("li",[a._v("headers 响应头 数目长度必须为偶数 基数位为key 偶数位 为value")])]),a._v(" "),t("h4",{attrs:{id:"downloadmodel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#downloadmodel"}},[a._v("#")]),a._v(" DownloadModel")]),a._v(" "),t("ul",[t("li",[a._v("fileName 文件名称 带后缀 123.png")]),a._v(" "),t("li",[a._v("fileType 文件类型 png")]),a._v(" "),t("li",[a._v("parentPath 文件父级路径 绝对路径 eg /test/123.png 此处就是/test")]),a._v(" "),t("li",[a._v("separator  文件路径分隔符 默认为系统分隔符")]),a._v(" "),t("li",[a._v("fullFilePath 文件全路径  eg /test/123.png")]),a._v(" "),t("li",[a._v("extra 额外参数 自定义处理器时可能用的到")]),a._v(" "),t("li",[a._v("downloadCallback 后置处理器 执行完之后可以做一些收尾工作")])]),a._v(" "),t("p",[a._v("3、开始使用")]),a._v(" "),t("p",[a._v("直接访问地址 即可 下载附件。")])])}),[],!1,null,null,null);t.default=e.exports}}]);